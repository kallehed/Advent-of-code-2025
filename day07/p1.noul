lns := read() then lines;
beams := [[0,lns[0] locate "S"]];
coun := 0;
try while (true) 
  beams = unique (beams flat_map \[i,j] -> if (lns[i+1][j] == "^") (coun+=1;[[i+1,j-1],[i+1,j+1]]) else [[i+1,j]]);
catch e -> 0;
print(coun);
